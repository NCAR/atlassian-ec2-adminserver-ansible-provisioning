user  www-data www-data;
pid /run/nginx.pid;
error_log  /var/log/nginx/error.log info;
worker_processes auto;
include /etc/nginx/modules-enabled/*.conf;

events {
    worker_connections 768;
}


http {
    access_log  /var/log/nginx/access.log;

    set_real_ip_from  {{ vpc_cidr }};
    real_ip_header    X-Forwarded-For;
    real_ip_recursive on;
    
    server {
        listen 80;
        server_name {{ nginx_domain_name }};

        location / {
            allow {{ nginx_allowed_cidr }};
            deny all;

            root {{ web_root }};
            autoindex on;
        }
    }

}
